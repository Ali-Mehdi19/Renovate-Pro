The "Closure" Algorithm
In a typical Mumbai flat, walls are rarely perfectly $90^{\circ}$. The POC must implement a Vector Loop Closure algorithm:
Coordinate Assignment: As a surveyor inputs data, the system treats each wall as a vector with a magnitude (length) and direction (angle)44.

The Error Gap: Due to minor measurement inaccuracies, the final vector often won't perfectly meet the origin. The POC uses a Least Squares Adjustment to distribute this "closure error" across all vertices, ensuring a closed, dimensionally accurate shape.

Transformation: The engine converts these adjusted vectors into a set of $(x, y)$ coordinates stored in the Survey_Data collection5555



import { z } from 'zod';

export const SurveySchema = z.object({
  roomType: z.string().min(1, "Room type is required"),
  length_m: z.coerce.number() // Coerces string input from form to number
    .min(0.1, "Length must be positive")
    .max(50, "Length exceeds 50m limit"), // Range check from synopsis
});

// components/MeasurementInput.tsx
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';

export const MeasurementInput = () => {
  const { register, handleSubmit, formState: { errors } } = useForm({
    resolver: zodResolver(SurveySchema),
  });

  return (
    <form onSubmit={handleSubmit((data) => console.log(data))}>
      <label>Wall Length (Meters)</label>
      <input 
        {...register('length_m')} 
        type="number" 
        step="0.01" 
        inputMode="decimal" // Forces numeric keypad on mobile
        className="border p-2 w-full"
      />
      {errors.length_m && <p className="text-red-500">{errors.length_m.message}</p>}
      
      <button type="submit" className="bg-blue-500 text-white p-2">
        Save Measurement
      </button>
    </form>
  );
};

1. The Geometric Algorithm (Logic)The algorithm follows a "Vector-to-Coordinate" approach. Every wall is treated as a vector with a magnitude ($Length\_m$) and a direction (relative angle).Initial Origin: The first vertex is always set at $(0, 0)$.Angle Accumulation: The interior angle provided by the surveyor is used to calculate the absolute heading for each subsequent wall.Trigonometric Projection: The next coordinate is calculated using:$x_{next} = x_{current} + L \cdot \cos(\theta)$$y_{next} = y_{current} + L \cdot \sin(\theta)$


